{namespace lempera.trafficCounter.viewer.users.templates autoescape="contextual"}

/**
 * table template.
 * @param records
 * @param interval
 */
{template .main}
  <div class="row show-grid ">
    <div class="span4">
      <h3>Users</h3>
    </div>
    <div class="span4">
      <div class="trafficCounter-granularity btn-group">
        <button class="btn {if $interval == 'day'}active{/if}"><a href="#/users/day">Day</a></button>
        <button class="btn {if $interval == 'week'}active{/if}"><a href="#/users/week">Week</a></button>
        <button class="btn {if $interval == 'month'}active{/if}"><a href="#/users/month">Month</a></button>
      </div>
    </div>
    <div class="span12">
      {call .table}
        {param records: $records /}
        {param interval: $interval /}
      {/call}
    </div>
  </div>
{/template}

/**
 * table template.
 * @param records
 * @param interval
 */
{template .table}
  <table  class="table table-striped table-condensed">
    <tr>
      <th>IP</th>
      <th>UP</th>
      <th>DOWN</th>
      <th>TOTAL</th>
      <th>FUP</th>
    </tr>
    {foreach $record in $records}
      {call .row}
        {param record: $record /}
        {param interval: $interval /}
      {/call}
    {/foreach}
  </table>
{/template}

/**
 * table template.
 * @param record
 * @param interval
 */
{template .row}
    {if $record['fupState'] == 'limit1'}
      <tr class="warning">
    {elseif $record['fupState'] == 'limit2'}
      <tr class="error">
    {/if}
    <td class="align-left"><a href="#/user/{$record['ip']}/{$interval}">{$record['ip']}</a></td>
    <td>{$record['upload']}</td>
    <td>{$record['download']}</td>
    <td>{$record['total']}</td>
    <td class="align-center">
      {if $record['fupState'] == 'limit1'}
        FUP1
      {elseif $record['fupState'] == 'limit2'}
        FUP2
      {/if}
    </td>
  </tr>
{/template}
